<!DOCTYPE html>
<html dir="ltr" lang="pt-BR">
<head>
<meta charset="utf-8" />
<title>&nbsp;Books Repository</title>

<style type="text/css" media="all">
/*
Theme Name: Antonio Almeida
Theme URI: http://www.fonodetian.com/
Description:
Version: 1.0
Author: Antonio Almeida
Author URI: http://www.almhpg.com/
*/

/*
verde fundo #20b2aa
verde | menu	#76c0bd
verde submenu	#1a7c78
verde blockq	#ebf5f5
*/

*, html, body		{margin: 0; padding: 0;}

body      {background: #4682b4; font: 12px/150% Verdana,Tahoma,sans-serif;}

a:link, a:visited	{color: #037570; text-decoration: none; font-weight: bold;}
a:hover, a:active	{color: #037570; text-decoration: underline;}

p			{margin-bottom: 1.5em;}

h1			{font: normal 28px/120% Arial,sans-serif;}

h2			{font: 22px/120% normal Arial,sans-serif; margin-bottom: 20px;}

h5                      {font-size: 18px; font-weight: normal; line-height: 120%; margin-bottom: 10px;}

h6			{font-size: 12px; color: #666; margin-bottom: 20px;}

hr			{background: #999; color: #999; height: 1px; border: none; text-align: center;}

/* ***** Palco ***** */
/* palco.css
   almhpg.com - Desenvolvido por Antonio Carlos de Almeida
*/
.quadMobil{
  max-width: 900px;
  background: #4682b4;
  padding: 20px;
  font-size: small;
}
img,
picture,
video,
embed{
max-width: 100%;
}
.bordaInterna{
     background-color: #9acd32;
     padding: 10px;
     -webkit-border-radius: 8px;
     -moz-border-radius: 8px;
     -khtml-border-radius: 8px;
     border-radius: 8px;
     -webkit-box-shadow: 1px 1px 2px #999;
     -box-box-shadow: 1px 1px 2px #999;
     -khtml-box-shadow: 1px 1px 2px #999;
      box-shadow: 1px 1px 2px #999;
      clear: both;
}
.quadTopo{
    padding-top: 10px;
    padding-bottom: 10px;
    background: #ffd700;
}
.quadCorpo{
   background: #ffffcc;
   padding: 20px;
   font-size: 14px;
   color: #5E0F50;
}
.quadBase{
  padding: 10px;
  background: #ffd700;
}
.zbiniciar{
font-size: 18px;
color: rgb(025,025,112);
border: 5px solid #069;
background-color: #DAF6D1;
border-color: #81DAF5;
padding: 9px;
-moz-border-radius: 8px; /* Para Firefox */
-webkit-border-radius: 8px; /*Para Safari e Chrome */
border-radius: 8px; /* Para Opera 10.5+*/
}
</style>
/* Classe por Almeida */
   
</head>
<body>
<center>
<!-- Tudo -->
<div class="quadMobil">
<div class="bordaInterna">
<!-- quadTopo -->
<div class="quadTopo" align="center">
<h1>Web chat online</h1>
</div>
<!-- Palco -->
<!-- Bloco01 -->
<div class="quadCorpo"  align="left">
<h2>&diams;&nbsp;Sala de Bate-Papo</h2>

<!-- Table -->
<!--  Webchat -->
<meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Webchat com socketIO</title>
 
 <style media="screen">
       body {width: 500px; margin: 0 auto; margin-top: 2rem; }
       .send {width: 100%; margin: 0; padding: 0; margin-top: 1rem; }
       input.text {width: 95%; margin: 0; padding: 0; padding: 5px; }
       .btn {padding: 5px 0; width: 82px; background-color: #eee; border: 0; margin: 0; border: solid #eee;}
       .btn:hover {background-color: #00e4bc}
       ul {list-style-type: none;width: 100%;padding: 0;margin: 0;}
       li { padding: 5px 10px; }
       li:nth-child(odd) {background-color: #eee}
 </style>
 
<!--  Lista de mensagens -->
 <ul class="ul" id="messages"></ul>
 <!--  input com e botão de submit-->
<div class="send">
<p><input class="text" autofocus="" id="menssagem" autocomplete="off" placeholder="Cloud está em apuros!"></p>
<p><button class="zbiniciar" id="enviar_menssagem">Enviar</button></p>
<!-- endBotao -->
</div>
 
<!--  endWebchat -->
<!--  importar o client do socketIO-->
<script src="/socket.io/socket.io.js"></script>
<script>
    // faz com que seja possível enviar mensagens com Enter
    document.getElementById('menssagem').addEventListener('keypress', function(e) {
        var key = e.which || e.keyCode;
        if (key == 13) {
            enviar_menssagem();
        }
    });
    // inicia o client socketIO
    var socket = io();
    // Abre um popup perguntando o nome da pessoa
    var nome_usuario = prompt("Qual seu nome?");
    // Lista com alguns nomes do Final Fantasy
    var ff = [
        "Cloud Strife",
        "Sephiroth",
        "Vincent Valentine",
        "Zack Fair",
        "Aerith Gainsborough",
        "Tifa Lockhart",
        "Barret Wallace",
        "Yuffie Kisaragi",
    ];
    // Caso usuário não informe um nome será atribuido um nome aleatório da lista
    if (nome_usuario === null || nome_usuario == "" || nome_usuario == " ") {
        nome_usuario = ff[Math.floor(Math.random() * ff.length)];
    }
 
    socket.emit('chat message', "Bem vindo! " + nome_usuario);
    // adiciona um addEventListener para o botão de submit
    document.getElementById('enviar_menssagem').addEventListener("click", enviar_menssagem);
    // cria a função que conecta no websocket e emite a mensagem
    function enviar_menssagem() {
      // salva a mensagem como uma string
      msg = document.getElementById('menssagem').value;
      if (msg.length > 0) {
          console.log(msg);
          // concatena o nome de usuário e a mensagem para enviar ao socketIo
          socket.emit('chat message', nome_usuario + ": " + msg);
          // reseta o valor do input da mensagem
          document.getElementById('menssagem').value = "";
      }
    }
    // sempre que receber uma mensagem ela é adicionada a lista
    socket.on('chat message', function(msg){
        // busca o elemento UL
        let ul = document.getElementById("messages");
        // cria um elemento LI
        let li = document.createElement('li');
        // cria o elemento de quebra de linha
        let br = document.createElement('br');
        li.appendChild(document.createTextNode(msg));
        // adicionar o nome do usuário quebra a linha e adicionar a mensagem à lista de mensagems
        ul.appendChild(li);
    });
    </script>
<!--  endWebchat -->

</div>
<!-- end Bloco01 -->
<!-- end Palco -->
<!-- quadBase -->
<div class="quadBase" align="center">
<a href="http://www.alm.pro.br" target="_blank">
<font color="#000000" size="1">&copy; Copyright 2011 - Almeida Home Page<br />www.alm.pro.br</font></a>
</div><!-- end quadBase -->
</div><!-- end bordaInterna -->
</div><!-- end quadMobil -->
</center>
</body>
</html>
